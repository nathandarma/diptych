{"ast":null,"code":"// src/index.ts\nimport { useRef, useState, useEffect, useCallback } from \"react\";\nimport { useIsHydrated } from \"@heroui/react-utils\";\nimport { useSafeLayoutEffect } from \"@heroui/use-safe-layout-effect\";\nfunction useImage(props = {}) {\n  const {\n    onLoad,\n    onError,\n    ignoreFallback,\n    src,\n    crossOrigin,\n    srcSet,\n    sizes,\n    loading\n  } = props;\n  const isHydrated = useIsHydrated();\n  const imageRef = useRef(isHydrated ? new Image() : null);\n  const [status, setStatus] = useState(\"pending\");\n  useEffect(() => {\n    if (!imageRef.current) return;\n    imageRef.current.onload = event => {\n      flush();\n      setStatus(\"loaded\");\n      onLoad == null ? void 0 : onLoad(event);\n    };\n    imageRef.current.onerror = error => {\n      flush();\n      setStatus(\"failed\");\n      onError == null ? void 0 : onError(error);\n    };\n  }, [imageRef.current]);\n  const flush = () => {\n    if (imageRef.current) {\n      imageRef.current.onload = null;\n      imageRef.current.onerror = null;\n      imageRef.current = null;\n    }\n  };\n  const load = useCallback(() => {\n    if (!src) return \"pending\";\n    if (ignoreFallback) return \"loaded\";\n    const img = new Image();\n    img.src = src;\n    if (crossOrigin) img.crossOrigin = crossOrigin;\n    if (srcSet) img.srcset = srcSet;\n    if (sizes) img.sizes = sizes;\n    if (loading) img.loading = loading;\n    imageRef.current = img;\n    if (img.complete && img.naturalWidth) {\n      return \"loaded\";\n    }\n    return \"loading\";\n  }, [src, crossOrigin, srcSet, sizes, onLoad, onError, loading]);\n  useSafeLayoutEffect(() => {\n    if (isHydrated) {\n      setStatus(load());\n    }\n  }, [isHydrated, load]);\n  return ignoreFallback ? \"loaded\" : status;\n}\nvar shouldShowFallbackImage = (status, fallbackStrategy) => status !== \"loaded\" && fallbackStrategy === \"beforeLoadOrError\" || status === \"failed\" && fallbackStrategy === \"onError\";\nexport { shouldShowFallbackImage, useImage };","map":{"version":3,"names":["useRef","useState","useEffect","useCallback","useIsHydrated","useSafeLayoutEffect","useImage","props","onLoad","onError","ignoreFallback","src","crossOrigin","srcSet","sizes","loading","isHydrated","imageRef","Image","status","setStatus","current","onload","event","flush","onerror","error","load","img","srcset","complete","naturalWidth","shouldShowFallbackImage","fallbackStrategy"],"sources":["/Users/nathandarma/Documents/App Testing/Diptych/diptych/node_modules/@heroui/use-image/dist/index.mjs"],"sourcesContent":["// src/index.ts\nimport { useRef, useState, useEffect, useCallback } from \"react\";\nimport { useIsHydrated } from \"@heroui/react-utils\";\nimport { useSafeLayoutEffect } from \"@heroui/use-safe-layout-effect\";\nfunction useImage(props = {}) {\n  const { onLoad, onError, ignoreFallback, src, crossOrigin, srcSet, sizes, loading } = props;\n  const isHydrated = useIsHydrated();\n  const imageRef = useRef(isHydrated ? new Image() : null);\n  const [status, setStatus] = useState(\"pending\");\n  useEffect(() => {\n    if (!imageRef.current) return;\n    imageRef.current.onload = (event) => {\n      flush();\n      setStatus(\"loaded\");\n      onLoad == null ? void 0 : onLoad(event);\n    };\n    imageRef.current.onerror = (error) => {\n      flush();\n      setStatus(\"failed\");\n      onError == null ? void 0 : onError(error);\n    };\n  }, [imageRef.current]);\n  const flush = () => {\n    if (imageRef.current) {\n      imageRef.current.onload = null;\n      imageRef.current.onerror = null;\n      imageRef.current = null;\n    }\n  };\n  const load = useCallback(() => {\n    if (!src) return \"pending\";\n    if (ignoreFallback) return \"loaded\";\n    const img = new Image();\n    img.src = src;\n    if (crossOrigin) img.crossOrigin = crossOrigin;\n    if (srcSet) img.srcset = srcSet;\n    if (sizes) img.sizes = sizes;\n    if (loading) img.loading = loading;\n    imageRef.current = img;\n    if (img.complete && img.naturalWidth) {\n      return \"loaded\";\n    }\n    return \"loading\";\n  }, [src, crossOrigin, srcSet, sizes, onLoad, onError, loading]);\n  useSafeLayoutEffect(() => {\n    if (isHydrated) {\n      setStatus(load());\n    }\n  }, [isHydrated, load]);\n  return ignoreFallback ? \"loaded\" : status;\n}\nvar shouldShowFallbackImage = (status, fallbackStrategy) => status !== \"loaded\" && fallbackStrategy === \"beforeLoadOrError\" || status === \"failed\" && fallbackStrategy === \"onError\";\nexport {\n  shouldShowFallbackImage,\n  useImage\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}